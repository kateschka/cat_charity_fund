# QRKot - Система управления благотворительными проектами

FastAPI приложение для управления благотворительными проектами и пожертвованиями. Система позволяет создавать благотворительные проекты, принимать пожертвования и автоматически распределять средства между проектами.

## Возможности

- **Управление благотворительными проектами**: Создание, обновление и удаление проектов
- **Система пожертвований**: Прием и управление пожертвованиями от пользователей
- **Автоматическое инвестирование**: Умное распределение пожертвований по проектам
- **Аутентификация пользователей**: Безопасное управление пользователями с правами суперпользователя
- **REST API**: Полноценный REST API с автоматической документацией
- **Интеграция с базой данных**: SQLAlchemy с асинхронной поддержкой и миграциями Alembic

## Технологический стек

- **Backend**: FastAPI
- **База данных**: SQLite (с асинхронной поддержкой SQLAlchemy)
- **Аутентификация**: FastAPI Users
- **Миграции**: Alembic
- **Тестирование**: pytest
- **Документация**: OpenAPI/Swagger

## Быстрый старт

### Требования

- Python 3.9+
- pip или pipenv

### Установка

1. **Клонируйте репозиторий**

   ```bash
   git clone <url-репозитория>
   cd cat_charity_fund
   ```

2. **Создайте виртуальное окружение**

   ```bash
   python -m venv venv
   # В Windows
   venv\Scripts\activate
   # В macOS/Linux
   source venv/bin/activate
   ```

3. **Установите зависимости**

   ```bash
   pip install -r requirements.txt
   ```

4. **Настройте переменные окружения**
   Создайте файл `.env` в корневой директории:

   ```env
   APP_TITLE=Название проекта
   APP_DESCRIPTION=Система управления благотворительными проектами
   DATABASE_URL=sqlite+aiosqlite:///./fastapi.db
   SECRET=ваш-секретный-ключ
   FIRST_SUPERUSER_EMAIL=имейл-суперпользователя
   FIRST_SUPERUSER_PASSWORD=пароль-суперпользователя
   ```

5. **Запустите миграции базы данных**

   ```bash
   alembic upgrade head
   ```

6. **Запустите приложение**
   ```bash
   uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
   ```

Приложение будет доступно по адресу `http://localhost:8000`

## Документация API

После запуска приложения вы можете получить доступ к:

- **Интерактивная документация API**: http://localhost:8000/docs
- **ReDoc документация**: http://localhost:8000/redoc
- **Схема OpenAPI**: http://localhost:8000/openapi.json

## API Endpoints

### Аутентификация

- `POST /auth/register` - Регистрация нового пользователя
- `POST /auth/login` - Вход пользователя
- `POST /auth/logout` - Выход пользователя

### Благотворительные проекты

- `GET /charity_project/` - Получить все благотворительные проекты
- `POST /charity_project/` - Создать новый проект (только суперпользователь)
- `PATCH /charity_project/{project_id}` - Обновить проект (только суперпользователь)
- `DELETE /charity_project/{project_id}` - Удалить проект (только суперпользователь)

### Пожертвования

- `GET /donation/` - Получить все пожертвования (только суперпользователь)
- `POST /donation/` - Создать новое пожертвование
- `GET /donation/my` - Получить пожертвования текущего пользователя

## Структура проекта

```
cat_charity_fund/
├── alembic/                 # Миграции базы данных
├── app/
│   ├── api/                # API endpoints и роутеры
│   ├── core/               # Основная конфигурация и утилиты
│   ├── crud/               # CRUD операции с базой данных
│   ├── models/             # SQLAlchemy модели
│   ├── schemas/            # Pydantic схемы
│   ├── services/           # Бизнес-логика
│   └── main.py            # Точка входа FastAPI приложения
├── tests/                  # Тестовые файлы
├── requirements.txt        # Python зависимости
├── alembic.ini            # Конфигурация Alembic
└── README.md              # Этот файл
```

## Тестирование

Запуск тестов:

```bash
# Запустить все тесты
pytest
```

## Автор

Кузнецова Екатерина
